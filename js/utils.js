const btf={debounce:(t,n=0,e=!1)=>{let o;return(...i)=>{const a=()=>{o=null,e||t(...i)},s=e&&!o;clearTimeout(o),o=setTimeout(a,n),s&&t(...i)}},throttle:function(t,n,e={}){let o,i,a,s=0;const r=()=>{s=e.leading===!1?0:new Date().getTime(),o=null,t.apply(i,a),o||(i=a=null)};return(...l)=>{const c=new Date().getTime();!s&&e.leading===!1&&(s=c);const d=n-(c-s);i=this,a=l,d<=0||d>n?(o&&(clearTimeout(o),o=null),s=c,t.apply(i,a),o||(i=a=null)):!o&&e.trailing!==!1&&(o=setTimeout(r,d))}},sidebarPaddingR:()=>{const t=window.innerWidth,n=document.body.clientWidth,e=t-n;t!==n&&(document.body.style.paddingRight=e+"px")},snackbarShow:(t,n=!1,e=2e3)=>{const{position:o,bgLight:i,bgDark:a}=GLOBAL_CONFIG.Snackbar,s=document.documentElement.getAttribute("data-theme")==="light"?i:a;Snackbar.show({text:t,backgroundColor:s,showAction:n,duration:e,pos:o,customClass:"snackbar-css"})},diffDate:(t,n=!1)=>{const e=new Date,o=new Date(t),i=e.getTime()-o.getTime(),a=1e3*60,s=a*60,r=s*24,f=r*30,{dateSuffix:l}=GLOBAL_CONFIG;if(!n)return parseInt(i/r);const c=i/f,d=i/r,u=i/s,m=i/a;return c>12?o.toISOString().slice(0,10):c>=1?`${parseInt(c)} ${l.month}`:d>=1?`${parseInt(d)} ${l.day}`:u>=1?`${parseInt(u)} ${l.hour}`:m>=1?`${parseInt(m)} ${l.min}`:l.just},loadComment:(t,n)=>{if("IntersectionObserver"in window){const e=new IntersectionObserver(o=>{o[0].isIntersecting&&(n(),e.disconnect())},{threshold:[0]});e.observe(t)}else n()},scrollToDest:(t,n=500)=>{const e=window.pageYOffset,o=document.getElementById("page-header").classList.contains("fixed");if((e>t||o)&&(t=t-70),"scrollBehavior"in document.documentElement.style){window.scrollTo({top:t,behavior:"smooth"});return}let i=null;t=+t,window.requestAnimationFrame(function a(s){i=i||s;const r=s-i;e<t?window.scrollTo(0,(t-e)*r/n+e):window.scrollTo(0,e-(e-t)*r/n),r<n?window.requestAnimationFrame(a):window.scrollTo(0,t)})},animateIn:(t,n)=>{t.style.display="block",t.style.animation=n},animateOut:(t,n)=>{t.addEventListener("animationend",function e(){t.style.display="",t.style.animation="",t.removeEventListener("animationend",e)}),t.style.animation=n},wrap:(t,n,e)=>{const o=document.createElement(n);for(const[i,a]of Object.entries(e))o.setAttribute(i,a);t.parentNode.insertBefore(o,t),o.appendChild(t)},isHidden:t=>t.offsetHeight===0&&t.offsetWidth===0,getEleTop:t=>{let n=t.offsetTop,e=t.offsetParent;for(;e!==null;)n+=e.offsetTop,e=e.offsetParent;return n},loadLightbox:t=>{const n=GLOBAL_CONFIG.lightbox;n==="mediumZoom"&&mediumZoom(t,{background:"var(--zoom-bg)"}),n==="fancybox"&&(Array.from(t).forEach(e=>{if(e.parentNode.tagName!=="A"){const o=e.dataset.lazySrc||e.src,i=e.title||e.alt||"";btf.wrap(e,"a",{href:o,"data-fancybox":"gallery","data-caption":i,"data-thumb":o})}}),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{showOnStart:!1},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}}),window.fancyboxRun=!0))},setLoading:{add:t=>{t.insertAdjacentHTML("afterend",`
        <div class="loading-container">
          <div class="loading-item">
            <div></div><div></div><div></div><div></div><div></div>
          </div>
        </div>
      `)},remove:t=>{t.nextElementSibling.remove()}},updateAnchor:t=>{if(t!==window.location.hash){t||(t=location.pathname);const n=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:n},n,t)}},getScrollPercent:(t,n)=>{const e=n.clientHeight,o=document.documentElement.clientHeight,i=n.offsetTop,a=e>o?e-o:document.documentElement.scrollHeight-o,s=(t-i)/a,r=Math.round(s*100);return r>100?100:r<=0?0:r},addGlobalFn:(t,n,e=!1,o=window)=>{const i=o.globalFn||{},a=i[t]||{};e&&a[e]||(e=e||Object.keys(a).length,a[e]=n,i[t]=a,o.globalFn=i)},addEventListenerPjax:(t,n,e,o=!1)=>{t.addEventListener(n,e,o),btf.addGlobalFn("pjax",()=>{t.removeEventListener(n,e,o)})},removeGlobalFnEvent:(t,n=window)=>{const{globalFn:e={}}=n,o=e[t]||{},i=Object.keys(o);i.length&&(i.forEach(a=>{o[a]()}),delete n.globalFn[t])}};
